<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="owl.OwlSalesDashboard" owl="1">
        <div class="d-flex overflow-hidden vh-100">
            <div class="flex-grow-1 overflow-auto bg-muted p-0">
                <div class="row m-3">
                    <div class="row">
                        <!-- <div class="col m-0 p-0"> -->
                        <div class="shadow-sm border m-2 p-2 bg-white">
                            <div class="d-flex align-items-center justify-content-between">
                                <div class="d-flex gap-3">
                                    <div>
                                        <select class="form-select">
                                            <option value="San Franscio">San Franscio(Main)</option>
                                            <option value="Los Angeles">Los Angeles</option>
                                            <option value="California">California</option>
                                            <option value="Texas">Texas</option>
                                            <option value="Alabama">Alabama</option>
                                        </select>
                                    </div>
                                    <div>
                                        <select class="form-select" t-on-change="onChangePeriod" t-model="state.period">
                                            <option value="0">Select Period</option>
                                            <option value="7">Last 7 Days</option>
                                            <option value="30">Last 30 Days</option>
                                            <option value="90">Last 90 Days</option>
                                            <option value="365">Last 365 Days</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center gap-3">
                                    <div class="d-flex align-items-center">
                                        <div class="input-group input-group-sm border rounded" style="max-width: 260px;">
                                            <span class="input-group-text bg-white border-0">
                                                <i class="fa fa-search text-muted"/>
                                            </span>
                                            <input type="text" class="form-control border-0 shadow-none" placeholder="Search..." t-on-keyup="onSearchKeyup"/>
                                        </div>
                                    </div>
                                    <div>
                                        <span class="input-group-text bg-white border-0">
                                            <i class="fa fa-bell text-muted"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- </div> -->
                    </div>
                    <div class="o_inventory_dashboard p-3">
                        <t t-if="state and state.kpiData">
                            <div class="row">
                                <KpiCard icon="'fa-cube'" color="'primary'" name="'Stock On Hand'" value="state.kpiData.stock_on_hand" description="'Units across all locations'" percentage="12" trend="'up'" resModel="'stock.quant'"/>
                                <KpiCard icon="'fa-history'" color="'success'" name="'Forecasted Stock'" value="state.kpiData.forecasted_stock" description="'Includes pending receipts'" percentage="-5" trend="'down'" resModel="'stock.move'"/>
                                <KpiCard icon="'fa-arrow-down'" color="'warning'" name="'Incoming'" value="state.kpiData.incoming" description="'Units to receive'" percentage="8" trend="'up'" resModel="'stock.picking'"/>
                                <KpiCard icon="'fa-arrow-up'" color="'danger'" name="'Outgoing'" value="state.kpiData.outgoing" description="'Units to deliver'" percentage="-3" trend="'down'" resModel="'stock.picking'"/>
                                <KpiCard icon="'fa-usd'" color="'info'" name="'Stock Value'" value="state.kpiData.stock_value" description="'Current valuation'" percentage="5" trend="'up'" resModel="'product.product'"/>
                                <KpiCard icon="'fa-exclamation-triangle'" color="'primary'" name="'Low Stock Alerts'" value="state.kpiData.low_stock_count" description="'Products below min'" percentage="-10" trend="'down'" resModel="'product.product'"/>
                            </div>
                        </t>
                        <t t-else="">
                            <div class="text-center p-5">
                                <i class="fa fa-spin fa-spinner fa-3x text-muted"/>
                                <p>Loading Dashboard Data...</p>
                            </div>
                        </t>
                    </div>
                    <h3 class="text-primary fw-bold">Operation Overview</h3>
                    <div class="row">
                        <OverviewCard name="'Receipts'" value="state.kpiData.receipts" description="'To Process'" priority="'High'" action_text="'Receive'" resModel="'stock.picking'"/>
                        <OverviewCard name="'Delivery Orders'" value="state.kpiData.deliveries" description="'To Process'" priority="'High'" action_text="'Deliver'" resModel="'stock.picking'"/>
                        <OverviewCard name="'Internal Transfers'" value="state.kpiData.internal_transfers" description="'Pending'" priority="'High'" action_text="'Transfers'" resModel="'stock.picking'"/>
                        <OverviewCard name="'Backorders'" value="state.kpiData.backorders" description="'Waiting'" priority="'Normal'" action_text="'Review'" resModel="'stock.picking'"/>
                    </div>
                    <div class="col-lg-8">
                        <div class="row">
                            <div class="col m-0 p-0">
                                <div class="shadow-sm border m-2 p-4 bg-white" style="height: 400px;">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <h3 class="text-primary fw-bold">Stock Movement Trends</h3>
                                        <div class="px-3 py-1 bg-primary cursor-pointer">
                                            <span class="fa fa-arrow-right text-white"/>
                                        </div>
                                    </div>
                                    <ChartRenderer type="'line'"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col m-0 p-0">
                                <div class="shadow-sm border m-2 p-4 bg-white">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <h3 class="text-primary fw-bold">Critical Replenishment Table</h3>
                                        <div class="px-3 py-1 bg-primary cursor-pointer">
                                            <span class="fa fa-arrow-right text-white"/>
                                        </div>
                                    </div>
                                    <div class="row m-2">
                                        <div class="col-12">
                                            <ReplenishmentTable />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="row">
                            <div class="col m-0 p-0">
                                <div class="shadow-sm border m-2 p-4 bg-white" style="height: 400px;">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <h3 class="text-primary fw-bold">Monthly Sales</h3>
                                        <div class="px-3 py-1 bg-primary cursor-pointer">
                                            <span class="fa fa-arrow-right text-white"/>
                                        </div>
                                    </div>
                                    <BarRenderer type="'bar'"/>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col m-0 p-0">
                                <div class="shadow-sm border m-2 p-4 bg-white mb-5">
                                    <div class="d-flex align-items-center justify-content-between mb-3">
                                        <h3 class="text-primary fw-bold">Partner Orders</h3>
                                        <div class="px-3 py-1 bg-primary cursor-pointer">
                                            <span class="fa fa-arrow-right text-white"/>
                                        </div>
                                    </div>
                                    <WarehouseProgressBar label="'Zone A (High Turnover)'" items="1240" percentage="85" color="'bg-success'"/>
                                    <WarehouseProgressBar label="'Zone B (Bulk Storage)'" items="560" percentage="40" color="'bg-warning'"/>
                                    <WarehouseProgressBar label="'Zone C (Electronics)'" items="890" percentage="92" color="'bg-danger'"/>
                                    <WarehouseProgressBar label="'Cold Storage'" items="320" percentage="60" color="'bg-success'"/>
                                    <WarehouseProgressBar label="'Returns Processing'" items="45" percentage="15" color="'bg-warning'"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>